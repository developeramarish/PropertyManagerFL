@using System.IO
@using System.Text.RegularExpressions
@using Microsoft.AspNetCore.Hosting
@using static PropertyManagerFL.Application.Shared.Enums.AppDefinitions;
@using Syncfusion.Blazor.SfPdfViewer;

@inject IStringLocalizer<App> L

@*@attribute [Authorize(Roles = "Admin, Medicos")]*@

<SfSpinner @ref="SpinnerObj"
           @bind-Visible="@VisibleProperty"
           Label="@L["MSG_PreparandoDados"]" Size="50"
           Type="SpinnerType.Bootstrap5" />

<div class="container-fluid">
    <hr />
    <div>
        <SfPdfViewer2 
                           Width="100%"
                           Height="800px"
                           DocumentPath="@PdfPath"
                           EnablePrint="true"
                           EnableThumbnailPanel = "false"
                           ZoomValue="100"
                           EnableDownload="true">
            @* <PdfViewerEvents DocumentLoaded="@OnDocumentLoaded" Created="OnCreate"></PdfViewerEvents> *@
        </SfPdfViewer2>

    </div>
</div>

@code {
    [Parameter] public string? PdfPath { get; set; }

    // private SfPdfViewerServer? Viewer { get; set; }
    private SfSpinner? SpinnerObj { get; set; }
    private bool VisibleProperty;

    // protected override async Task OnParametersSetAsync()
    // {

    //     try
    //     {
    //         await Task.Delay(200);
    //         await Viewer!.LoadAsync(PdfPath, null);
    //     }
    //     catch (Exception ex)
    //     {
    //         throw;
    //     }
    // }
    // private void OnDocumentLoaded(LoadEventArgs args)
    // {
    //     VisibleProperty = false;
    // }
    // private void OnCreate()
    // {
    //     VisibleProperty = true;
    // }
}

<style type="text/css" scoped>
    .e-spinner-pane .e-spinner-inner .e-spin-material {
        stroke: #808080;
    }
</style>